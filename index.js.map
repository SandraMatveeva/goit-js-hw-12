{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `\n      <li class=\"gallery-card\">\n        <a href=\"${imgInfo.largeImageURL}\" class=\"gallery-link\">\n          <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"/>\n        </a>\n        <ul class=\"info-card-list\">\n            <li class=\"info-card-item\">Likes <p> ${imgInfo.likes} </p></li>\n            <li class=\"info-card-item\">Views <p>${imgInfo.views}</p></li>\n            <li class=\"info-card-item\">Comments <p>${imgInfo.comments}</p></li>\n            <li class=\"info-card-item\">Downloads <p>${imgInfo.downloads}</p></li>\n        </ul>\n      </li>\n\n    `;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchInputQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: '48308646-4d458c48d5d2f9bc699dc7008',\n      q: searchInputQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  };\n\n  return axios.get('https://pixabay.com/api/', axiosOptions);\n};\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.gallery-load');\nconst loadMoreBtn = document.querySelector('.js-btn-load-more');\n\nlet page = 1;\nlet searchInputQuery = '';\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchInputQuery = event.currentTarget.elements.user_gallery.value.trim();\n    galleryEl.innerHTML = '';\n    searchFormEl.reset();\n\n    const showLoader = () => {\n      loader.classList.remove('hidden');\n    };\n    showLoader();\n\n    page = 1;\n    loadMoreBtn.classList.add('is-hidden');\n    const response = await fetchPhotosByQuery(searchInputQuery, page);\n\n    const stopLoader = () => {\n      loader.classList.add('hidden');\n    };\n    stopLoader();\n\n    const galleryTemplate = response.data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.innerHTML = galleryTemplate;\n\n    if (response.data.hits.length === 0) {\n      iziToast.show({\n        message: `❌ Sorry, there are no images matching your search query. Please, try again!`,\n        color: 'red',\n        position: 'topRight',\n      });\n    }\n\n    lightbox.refresh();\n    const totalLoadedImages = page * 15;\n\n    if (response.data.totalHits > totalLoadedImages) {\n      loadMoreBtn.classList.remove('is-hidden');\n      loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    page++;\n\n    const response = await fetchPhotosByQuery(searchInputQuery, page);\n    const galleryTemplate = response.data.hits\n      .map(el => createGalleryCardTemplate(el))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n    const { height: cardHeight } =\n      galleryEl.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const totalLoadedImages = page * 15; // 15 — це кількість зображень на сторінку\n    if (totalLoadedImages >= response.data.totalHits) {\n      loadMoreBtn.classList.add('is-hidden');\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        color: 'blue',\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// Ініціалізація SimpleLightbox\nlet lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["createGalleryCardTemplate","imgInfo","fetchPhotosByQuery","searchInputQuery","currentPage","axiosOptions","axios","searchFormEl","galleryEl","loader","loadMoreBtn","page","onSearchFormSubmit","event","response","galleryTemplate","el","iziToast","lightbox","totalLoadedImages","onLoadMoreBtnClick","error","cardHeight","SimpleLightbox"],"mappings":"owBAAO,MAAMA,EAA4BC,GAChC;AAAA;AAAA,mBAEUA,EAAQ,aAAa;AAAA,0CACEA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,mDAGjCA,EAAQ,KAAK;AAAA,kDACdA,EAAQ,KAAK;AAAA,qDACVA,EAAQ,QAAQ;AAAA,sDACfA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,MCR1DC,EAAqB,CAACC,EAAkBC,IAAgB,CACnE,MAAMC,EAAe,CACnB,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,EAEE,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAC3D,ECHME,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,eAAe,EAC/CC,EAAc,SAAS,cAAc,mBAAmB,EAE9D,IAAIC,EAAO,EACPR,EAAmB,GAEvB,MAAMS,EAAqB,MAAMC,GAAS,CACxC,GAAI,CACFA,EAAM,eAAc,EAEpBV,EAAmBU,EAAM,cAAc,SAAS,aAAa,MAAM,OACnEL,EAAU,UAAY,GACtBD,EAAa,MAAK,GAEC,IAAM,CACvBE,EAAO,UAAU,OAAO,QAAQ,CACtC,KAGIE,EAAO,EACPD,EAAY,UAAU,IAAI,WAAW,EACrC,MAAMI,EAAW,MAAMZ,EAAmBC,EAAkBQ,CAAI,GAE7C,IAAM,CACvBF,EAAO,UAAU,IAAI,QAAQ,CACnC,KAGI,MAAMM,EAAkBD,EAAS,KAAK,KACnC,IAAIE,GAAMhB,EAA0BgB,CAAE,CAAC,EACvC,KAAK,EAAE,EAEVR,EAAU,UAAYO,EAElBD,EAAS,KAAK,KAAK,SAAW,GAChCG,EAAS,KAAK,CACZ,QAAS,8EACT,MAAO,MACP,SAAU,UAClB,CAAO,EAGHC,EAAS,QAAO,EAChB,MAAMC,EAAoBR,EAAO,GAE7BG,EAAS,KAAK,UAAYK,IAC5BT,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,iBAAiB,QAASU,CAAkB,EAE3D,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EACAd,EAAa,iBAAiB,SAAUK,CAAkB,EAE1D,MAAMQ,EAAqB,MAAMP,GAAS,CACxC,GAAI,CACFF,IAEA,MAAMG,EAAW,MAAMZ,EAAmBC,EAAkBQ,CAAI,EAC1DI,EAAkBD,EAAS,KAAK,KACnC,IAAIE,GAAMhB,EAA0BgB,CAAE,CAAC,EACvC,KAAK,EAAE,EAEVR,EAAU,mBAAmB,YAAaO,CAAe,EAEzD,KAAM,CAAE,OAAQO,CAAY,EAC1Bd,EAAU,kBAAkB,wBAC9B,OAAO,SAAS,CACd,IAAKc,EAAa,EAClB,SAAU,QAChB,CAAK,EAEyBX,EAAO,IACRG,EAAS,KAAK,YACrCJ,EAAY,UAAU,IAAI,WAAW,EACrCA,EAAY,oBAAoB,QAASU,CAAkB,EAE3DH,EAAS,KAAK,CACZ,QAAS,6DACT,MAAO,OACP,SAAU,UAClB,CAAO,EAEJ,OAAQI,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,EAGA,IAAIH,EAAW,IAAIK,EAAe,gBAAiB,CACjD,aAAc,MACd,aAAc,GAChB,CAAC"}